<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="user-scalable=yes, width=device-width, maximum-scale=1.0" />
<title>サッカー作戦ボード</title>
<script>

  window.onload = function(){
  var canvas = document.getElementById("canvas1");
  
  setInterval(draw, 20);

  canvas.addEventListener("dblclick", mydblclick, false); 
  }


  function draw(){ 
  drawpitch();

  var cvs = canvas.getContext("2d"); 
  var l = marks.length;
  for (var i = 0; i < l ; i++){
		      cvs.beginPath();
		      cvs.arc(marks[i].x, marks[i].y, marks[i].r , 0, Math.PI*2, false);
		      cvs.stroke();
		      cvs.fillStyle=marks[i].fill;
		      cvs.fill();
		      }
}


  var marks[];

  function Marker(){
  this.x=0;
  this.y=0;
  this.r=7;
  this.fill="#ff7777"
  this.type=fillarc;
  }

  function addMarker(x,y,r,fill){
  var mark = new Marker;
  mark.x=x;
  mark.y=y;
  makr.r=r;
  mark.fill=fill;
  marks.push(mark);
//  invalidate();
  }

  function myclick(e){
  var radius = 7;
  addMarker(e.clientX, e.clienY, radius,"#ff7777");
  }
  


  function drawpitch(){
  var canvas = document.getElementById("canvas1");
  if(canvas.getContext){
  var cvs = canvas.getContext("2d");

  cvs.save();

//	canvas.width = window.innerWidth*0.95;
//	canvas.height = window.innerHeight*0.95;

  var cw = canvas.width;
  var ch = canvas.height;

  cvs.clearRect(0, 0, cw, ch);

  var xoff = cw*0.2;
  var pw = (cw - xoff*2);
  var ph = pw*68/50;

  var yoff = ch-ph*5/8-xoff;

  cvs.fillStyle="#f5f5f5";
  cvs.fillRect(0, 0, cw, ch);

  cvs.lineWidth=0.5;
//  cvs.lineCap="round";
  cvs.lineJoin="round";
  cvs.strokeStyle="#000000";

//Pitch for 8
  cvs.moveTo(xoff, ch-yoff-ph/2);
  cvs.lineTo(xoff, ch-yoff);
  cvs.lineTo(xoff+pw, ch-yoff);
  cvs.lineTo(xoff+pw, ch-yoff-ph/2)
  cvs.lineTo(xoff, ch-yoff-ph/2);
  cvs.lineTo(xoff, ch-yoff-ph*5/8);
  cvs.moveTo(xoff+pw, ch-yoff-ph/2);
  cvs.lineTo(xoff+pw, ch-yoff-ph*5/8);
//  cvs.fillStyle="#008000";
  cvs.stroke();


//Penalty Area
  cvs.moveTo(xoff+10.5/50*pw, ch-yoff);
  cvs.lineTo(xoff+10.5/50*pw, ch-yoff-12/50*pw);
  cvs.lineTo(xoff+39.5/50*pw, ch-yoff-12/50*pw);
  cvs.lineTo(xoff+39.5/50*pw, ch-yoff);

//Goal Area
  cvs.moveTo(xoff+18.5/50*pw, ch-yoff);
  cvs.lineTo(xoff+18.5/50*pw, ch-yoff-4/50*pw);
  cvs.lineTo(xoff+31.5/50*pw, ch-yoff-4/50*pw);
  cvs.lineTo(xoff+31.5/50*pw, ch-yoff);
  cvs.stroke();

//Goal
  cvs.strokeRect(xoff+22.5/50*pw, ch-yoff, 5/50*pw, 1/50*pw);

//Penalty Mark
  cvs.beginPath();
  cvs.arc(xoff+25/50*pw, ch-yoff-8/50*pw, 1, 0, Math.PI*2, false);
  cvs.stroke();
  cvs.fillStyle="#000000";
  cvs.fill();

//Penalty Arc
  cvs.beginPath();
  cvs.arc(xoff+25/50*pw, ch-yoff-8/50*pw, 7/50*pw , Math.PI*28.75/24, Math.PI*43.25/24, false);
  cvs.stroke();

//Center Circle
  cvs.beginPath();
  cvs.arc(xoff+pw/2,ch-yoff-ph/2, 7/50*pw , 0, Math.PI*2, false);
  cvs.stroke();

//Center Circle Mark
  cvs.beginPath();
  cvs.arc(xoff+pw/2,ch-yoff-ph/2, 2 , 0, Math.PI*2, false);
  cvs.stroke();
  cvs.fillStyle="#000000";
  cvs.fill();

//Corner Arc
  cvs.beginPath();
  cvs.arc(xoff,ch-yoff, 2/50*pw , Math.PI*3/2, Math.PI*2, false);
  cvs.stroke();

  cvs.beginPath();
  cvs.arc(xoff+pw,ch-yoff, 2/50*pw , Math.PI, Math.PI*3/2, false);
  cvs.stroke();

  cvs.restore();
}
}


</script>

<style type="text/css">
// #canvas1 {position: absolute; width: 100%; height: 100%; overflow: hidden}"
</style>

</head>

<body>
<canvas id="canvas1" width="800" height="800">
    canvasを表示できません
  </canvas>
</body>
</html>
